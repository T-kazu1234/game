(function(){enchant();window.onload=function(){var f,e,c,g,d,a,h,b;f=6;e=20;d="images/pad.png";c="images/ball.png";g="images/block.png";a="sound/se1.mp3";h="sound/se2.mp3";b=new Game(240,320);b.fps=24;b.preload([d,c,g,a,h]);b.rootScene.backgroundColor="blue";b.onload=function(){var l,i,r,m,p,k,s,q,o,n,j;k=0;r=[b.assets[a],b.assets[h]];s=new Label("SCORE : "+k);s.font="16px Tahoma";s.color="white";q=[10,5],s.x=q[0],s.y=q[1];b.rootScene.addChild(s);l=new Sprite(16,16);l.image=b.assets[c];o=[0,130],l.x=o[0],l.y=o[1];n=[1.5/3,2.5/3],l.dx=n[0],l.dy=n[1];l.speed=f;b.rootScene.addChild(l);m=new Sprite(32,4);m.image=b.assets[d];j=[b.width/2,b.height-20],m.x=j[0],m.y=j[1];b.rootScene.addChild(m);i=[];p=function(){var u,t,A,w,v,z;i=[];for(A=w=0;w<5;A=++w){for(t=v=0;v<7;t=++v){u=new Sprite(24,12);u.image=b.assets[g];u.frame=0;z=[t*32+12,A*18+30],u.x=z[0],u.y=z[1];b.rootScene.addChild(u);i.push(u)}}return null};b.rootScene.addEventListener(Event.ENTER_FRAME,function(){var t,w,v,u;v=function(){l.x=l.x+l.dx*l.speed;l.y=l.y+l.dy*l.speed;if((l.x<=0)||(l.x>=(b.width-l.width))){l.dx=-l.dx;l.x=l.x<=0?0:b.width-l.width}if(l.y<0){l.dy=-l.dy;l.y=0}if(l.y>b.height){b.stop();return alert("スコアは "+k+" 点でした")}};u=function(){var x;x=b.input.analogX/4;if(b.input.left){x=-6}if(b.input.right){x=6}if(isNaN(x)){x=0}m.x=m.x+x;if(m.x<0){m.x=0}if(m.x>(b.width-m.width)){return m.x=b.width-m.width}};w=function(){var x;if(m.intersect(l)){x=Math.atan2(16,l.x-m.x-10);l.dx=Math.cos(x);l.dy=(-1)*Math.sin(x);l.y=m.y-l.height;k+=10;l.speed=l.speed+0.025;if(l.speed>e){l.speed=e}return r[1].play()}};t=function(){var z,x,A,y;for(x=A=0,y=i.length;A<y;x=++A){z=i[x];if(l.intersect(z)){l.dy=-l.dy;z.parentNode.removeChild(z);i.splice(x,1);k+=5;r[0].play();break}}if(i.length<1){return p()}};v();u();w();t();return s.text="SCORE : "+k});p();return window.addEventListener("deviceorientation",(function(t){return b.input.analogX=t.gamma}),false)};return b.start()}}).call(this);